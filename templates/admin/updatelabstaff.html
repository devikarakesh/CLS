{% extends 'admin/adminbase.html' %}
{% block body %}
<style>
.lab{
     padding: 62px;
     max-width: 500px;
     background-color: #2f5b8d;
    border-radius: 5px;
    box-shadow:0 0 50px rgba(5,2, 1, 0.1);
    overflow: auto;
    margin-left: 600px;
    margin-top: -52px;
   
}        
.sch{
     margin-bottom: 15px;
     color: rgb(241, 236, 236);
    
}
.sch input{
    width: 100%;
    padding: 15px;
    border-radius: 5px;
    border: 1px solid black;
    background-color: white;
    margin-top: 5px;
    color: rgb(2, 2, 2);
}
.sch button{
    background-color: rgba(54, 53, 56, 0.858);
    padding: 10px;
    width: 100%;
    text-align: center;
    color: white;
    font-size: 15px;
}


.sc input{
    
    padding: 15px;
    border-radius: 5px;
    border: 1px solid black;
    background-color: rgba(37, 36, 38, 0.858);
    margin-top: 10px;
    cursor: pointer;
}
.sch textarea{
  width: 100%;
  padding: 8px;
  border-radius: 4px;
  background-color: white;
  font-size: 16px;
  
}
.sch label{
    font-size: 15px;
    font-style: normal;
    color: whitesmoke;
    margin-bottom: 10px;
}
.inp input{
    background-color:rgb(1, 13, 39);
      padding: 10px;
      width: 100%;
      text-align: center;
      color: white;
      font-size: 15px;

  }



     
    
  </style>
  
  <div class="lab">
    <form action="" method="post" onsubmit="return validateForm()">
        {% csrf_token %}
        <div style="font-size: 25px; text-align: center;"><b>Update Lab Staff</b></div>

        <div class="sch">
            <label for="name">Name</label>
            <input type="text" name="name" id="name" value="{{ ls.name }}" required>
        </div>

        <div class="sch">
            <label for="address">Address</label>
            <textarea name="address" id="address" rows="2" cols="20" required>{{ ls.address }}</textarea>
        </div>

        <div class="sch">
            <label for="email">Email</label>
            <input type="email" name="email" id="email" value="{{ ls.email }}" required>
            <span id="email-error" class="error-message" style="color: red;"></span>
        </div>

        <div class="sch">
            <label for="phone">Phone number</label>
            <input type="text" name="phone" id="phone" value="{{ ls.phone }}" required pattern="[6-9]\d{9}" 
                title="Enter a valid 10-digit phone number starting with 6, 7, 8, or 9.">
            <span id="phone-error" class="error-message" style="color: red;"></span>
        </div>

        <div class="sch">
            <label for="lab">Lab</label>
            <select name="lab" id="lab" required>
                {% for i in r %}
                <option value="{{ i.id }}" {% if i.id == ls.lab.id %} selected {% endif %}>{{ i.name }}</option>
                {% endfor %}
            </select>
        </div>

        <div class="inp">
            <b><input type="submit" value="UPDATE"></b>
        </div>
    </form>
</div>

<script>
document.addEventListener("DOMContentLoaded", function () {
    let inputs = document.querySelectorAll("input, textarea, select");
    inputs.forEach(input => input.addEventListener("input", validateForm));
});

function validateForm() {
    let isValid = true;

    // Name Validation
    let name = document.getElementById("name").value.trim();
    if (name.length < 3) isValid = false;

    // Email Validation
    let email = document.getElementById("email").value.trim();
    let emailError = document.getElementById("email-error");
    let emailPattern = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
    if (!emailPattern.test(email)) {
        emailError.textContent = "Enter a valid email.";
        isValid = false;
    } else {
        emailError.textContent = "";
    }

    // Phone Number Validation
    let phone = document.getElementById("phone").value.trim();
    let phoneError = document.getElementById("phone-error");
    let phonePattern = /^[6-9]\d{9}$/;
    if (!phonePattern.test(phone)) {
        phoneError.textContent = "Enter a valid 10-digit phone number.";
        isValid = false;
    } else {
        phoneError.textContent = "";
    }

    return isValid;
}
</script>
{% endblock %}