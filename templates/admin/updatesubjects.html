{% extends 'admin/adminbase.html' %}
{% block body %}
    <style>
        
        .lab{
  margin-left: 620px;
     padding: 50px;
     max-width: 450px;
     background-color: #2f5b8d;
    border-radius: 5px;
    box-shadow:0 0 50px rgba(5,2, 1, 0.1);
    overflow: auto;
    margin-top: 150px;
        }   
        
      
.sch{
     margin-bottom: 15px;
     color: white;
     ;
    
}
.sch input{
    width: 100%;
    padding: 15px;
    border-radius: 5px;
    border: 1px solid black;
    background-color: rgb(248, 246, 246);
    margin-top: 5px;
    cursor: pointer;
    color: rgb(5, 5, 5);
}
.sch button{
      background-color:rgb(1, 13, 39);
      padding: 10px;
      width: 100%;
      text-align: center;
      color: white;
      font-size: 15px;
  }
.sch button:hover{
    background-color: whitesmoke;
}


.sc input{
    
    padding: 6px;
    border-radius: 5px;
    border: 1px solid black;
    background-color: whitesmoke;
    margin-top: 5px;
    cursor: pointer;
}
.inp input{
    background-color:rgb(1, 13, 39);
      padding: 10px;
      width: 100%;
      text-align: center;
      color: white;
      font-size: 15px;

  }

    </style>

<div class="lab">
    <form action="" method="post" onsubmit="return validateForm()">
        {% csrf_token %}
        
        <!-- Subject Name -->
        <div class="sch">
            <label for="name">Subject Name</label>
            <input type="text" id="name" name="name" value="{{ s.name }}" required>
            <span id="nameError" style="color: red;"></span>
        </div>

        <!-- Contact Hours -->
        <div class="sch">
            <label for="contact-hours">Contact Hours</label>
            <input type="number" id="contact-hours" name="contact_hours" value="{{ s.contact_hours }}" required min="1">
            <span id="contactHoursError" style="color: red;"></span>
        </div>

        <!-- Assign Faculty -->
        <div class="sch">
            <label for="teacher">Assign Faculty:</label>
            <select id="teacher" name="faculty" required>
                {% for f in faculties %}
                <option value="{{ f.id }}" {% if s.faculty.id == f.id %}selected{% endif %}>{{ f.name }}</option>
                {% endfor %}
            </select>
            <span id="facultyError" style="color: red;"></span>
        </div>

        <!-- Submit Button -->
        <div class="inp">
            <b><input type="submit" value="UPDATE"></b>
        </div>
    </form>
</div>

<script>
    function validateForm() {
        let isValid = true;

        let name = document.getElementById("name").value.trim();
        let contactHours = document.getElementById("contact-hours").value;
        let faculty = document.getElementById("teacher").value;

        let nameError = document.getElementById("nameError");
        let contactHoursError = document.getElementById("contactHoursError");
        let facultyError = document.getElementById("facultyError");

        // Reset previous error messages
        nameError.innerText = "";
        contactHoursError.innerText = "";
        facultyError.innerText = "";

        // Subject Name Validation (only letters and spaces)
        let namePattern = /^[A-Za-z\s]+$/;
        if (name === "") {
            nameError.innerText = "Subject Name cannot be empty.";
            isValid = false;
        } else if (!namePattern.test(name)) {
            nameError.innerText = "Only letters and spaces are allowed.";
            isValid = false;
        }

        // Contact Hours Validation (must be a positive number)
        if (contactHours === "" || contactHours <= 0) {
            contactHoursError.innerText = "Contact Hours must be a positive number.";
            isValid = false;
        }

        // Faculty Selection Validation (must be selected)
        if (faculty === "") {
            facultyError.innerText = "Please select a faculty.";
            isValid = false;
        }

        return isValid;
    }
</script>

{% endblock %}
